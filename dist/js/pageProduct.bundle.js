(()=>{"use strict";const e=JSON.parse(sessionStorage.getItem("products")),t=new URL(window.location.href).searchParams.get("id");let n,o="",s=[];window.addEventListener("load",(()=>{console.log("[ Page is fully loaded ]"),document.getElementById("lenses").addEventListener("change",(e=>{o=e.target.options[e.target.selectedIndex].text,console.log(`[ Lense changed: ${o} ]`)})),console.log("...Listening to lense change"),document.getElementById("btnAddToCart").addEventListener("click",(function(){if(""==o)window.alert("Veuillez sélectionner une autre lentille."),console.log("Button clicked, user needs to select a lense to proceed.");else{console.log("...Checking data in sessionStorage");const t=JSON.parse(sessionStorage.getItem("products"))||[];s=[...t,{id:n._id,name:n.name,price:n.price,imageUrl:n.imageUrl,lense:o}],""==t||""==e.filter((e=>function(e){return e.id===n._id&&e.lense===o}(e)))?(sessionStorage.setItem("products",JSON.stringify(s)),console.log("[ Product saved ! ]"),console.log("Button clicked!"),location.href="../pages/cart.html"):window.alert("Ce produit est déjà dans votre panier. Veuillez sélectionner une autre lentille ou rechercher un autre produit.")}})),console.log('...Listening to "Add to cart"')})),(async()=>{try{n=await(async()=>{const e=await fetch(`http://localhost:3000/api/cameras/${t}`);return await e.json()})(),document.getElementById("title").textContent=`Produit | ${n.name} - Orinoco France`,document.getElementById("productImage").innerHTML=`<img class="img-fluid" src="${n.imageUrl}" alt="">`,document.getElementById("productName").textContent=n.name,document.getElementById("productPrice").textContent+=`€ ${Number(n.price/100).toFixed(2)}`,document.getElementById("description").textContent=n.description;const e=n.lenses;let o="<option>Choisissez votre lentille</option>";for(let t of e)o+=`<option>${t}</option>`;document.getElementById("lenses").innerHTML=o}catch(e){window.alert(e),console.log(e)}})()})();